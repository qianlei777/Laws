<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" th:src="@{/js/jquery-1.12.4.js}"></script>
</head>
<body>
<form>
    <p>旧密码：<input type="password" name="oldPwd"></p>
    <p>新密码：<input type="password" name="newPwd" id="newPwd"></p>
    <p>确认新密码：<input type="password" name="qnewPwd"></p>
    <p><button type="button" th:onclick="'javascript:gaiMi('+${session.user.id}+')'">修改</button></p>
    <p><button type="button"><a href="myself.html">返回</a></button></p>
</form>
</body>
<script>
    function gaiMi(id) {
        var flag=confirm("是否确认修改您的密码？");
        var password=$("#newPwd").val();
        if (flag){
            $.get("/miGai",{"id":id,"password":password},function (flag) {
                if (flag==="true"){
                    alert("修改成功！");
                    location.href='/exit';
                }else if (flag==="false"){
                    alert("修改失败！");
                }
            })
        }
    }
</script>
</html>